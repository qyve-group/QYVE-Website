import Image from 'next/image';\nimport Link from 'next/link';\nimport { notFound } from 'next/navigation';\nimport React from 'react';\n\nimport { supabase } from '@/libs/supabaseClient';\n\ninterface BlogPost {\n  id: number;\n  title: string;\n  slug: string;\n  content: string;\n  author: string;\n  featured_image: string;\n  created_at: string;\n  updated_at: string;\n}\n\ntype Props = {\n  params: { slug: string };\n};\n\nconst getBlogPost = async (slug: string): Promise<BlogPost | null> => {\n  try {\n    const { data, error } = await supabase\n      .from('blog_posts')\n      .select('*')\n      .eq('slug', slug)\n      .eq('published', true)\n      .single();\n\n    if (error) {\n      console.error('Error fetching blog post:', error);\n      return null;\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Error fetching blog post:', error);\n    return null;\n  }\n};\n\nconst formatDate = (dateString: string) => {\n  return new Date(dateString).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};\n\nconst BlogPostPage = async ({ params }: Props) => {\n  const post = await getBlogPost(params.slug);\n\n  if (!post) {\n    notFound();\n  }\n\n  return (\n    <div className=\"container max-w-4xl pb-20 pt-10\">\n      {/* Back to Blog */}\n      <Link \n        href=\"/blog\" \n        className=\"mb-8 inline-flex items-center text-primary hover:text-primary-600 transition-colors\"\n      >\n        <svg className=\"mr-2 h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n        </svg>\n        Back to Blog\n      </Link>\n\n      {/* Featured Image */}\n      <div className=\"relative mb-8 h-96 w-full overflow-hidden rounded-3xl\">\n        <Image\n          src={post.featured_image || '/qyve-white.png'}\n          alt={post.title}\n          fill\n          className=\"object-cover\"\n          sizes=\"(max-width: 768px) 100vw, 800px\"\n          priority\n        />\n      </div>\n\n      {/* Article Header */}\n      <header className=\"mb-8\">\n        <h1 className=\"mb-4 text-3xl font-bold text-gray-900 md:text-4xl lg:text-5xl\">\n          {post.title}\n        </h1>\n        \n        <div className=\"flex items-center gap-4 text-gray-500\">\n          <span className=\"font-medium\">{post.author}</span>\n          <span>•</span>\n          <span>{formatDate(post.created_at)}</span>\n          {post.updated_at !== post.created_at && (\n            <>\n              <span>•</span>\n              <span>Updated {formatDate(post.updated_at)}</span>\n            </>\n          )}\n        </div>\n      </header>\n\n      {/* Article Content */}\n      <article className=\"prose prose-lg max-w-none\">\n        <div \n          className=\"blog-content\"\n          dangerouslySetInnerHTML={{ \n            __html: post.content.replace(/\\n/g, '<br>').replace(/## /g, '<h2>').replace(/# /g, '<h1>') \n          }} \n        />\n      </article>\n\n      {/* Call to Action */}\n      <div className=\"mt-16 rounded-3xl bg-gray-50 p-8 text-center\">\n        <h3 className=\"mb-4 text-2xl font-bold text-gray-900\">\n          Ready to Experience QYVE?\n        </h3>\n        <p className=\"mb-6 text-gray-600\">\n          Discover our premium recovery gear designed for comfort and performance.\n        </p>\n        <Link \n          href=\"/shop\"\n          className=\"inline-flex items-center rounded-full bg-primary px-6 py-3 text-white font-medium transition-colors hover:bg-primary-600\"\n        >\n          Shop Now\n          <svg className=\"ml-2 h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n          </svg>\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default BlogPostPage;\n